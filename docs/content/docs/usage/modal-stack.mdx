---
title: <ModalStack />
layout: ../../layouts/CustomRenderingLayout.astro
---

Responsible for rendering the current stack of modals.

## Props

ModalStack can receive the following props (which are currently all just snippets):

```ts
interface ModalStackProps {
  backdrop?: Snippet<[modals: Modals]>
  modal?: Snippet<
    [
      modal: { 
        component: ModalComponent<ModalProps<any>, {}, string>; 
        props: ModalProps 
      },
      modals: Modals
    ]
  >
  loading?: Snippet<[modals: Modals]>
}
```

## Snippets

### backdrop

Renders when at least 1 modal has been opened.

```svelte
<ModalStack>
  {#snippet backdrop(modals)}
    <div class="backdrop" onclick={() => modals.close()}></div>
  {/snippet}
</ModalStack>
```

### modal

Renders each modal component in the stack

```svelte
<ModalStack>
  {#snippet modal(modal, modals)}
    <modal.component {...modal.props} />
  {/snippet}
</ModalStack>
```

### loading

Renders when a modal has been opened via dynamic import and is still loading.

```svelte
<ModalStack>
  {#snippet loading()}
    <LoadingSpinner />
  {/snippet}
</ModalStack>
```

## Advanced Usage

### Always show all modals

By overriding the `modal` snippet, you can change the behavior of the stack
to always show each opened modal.

```svelte
<script>
  import { ModalStack, modals } from 'svelte-modals'
</script>

<ModalStack>
  {#snippet backdrop({ close })}
    <div class="backdrop" onclick={() => close()}></div>
  {/snippet}

  {#snippet modal(modal)}
    <modal.component 
      {...modal.props}     
      isOpen={modals.stack.length > 0} 
    />
  {/snippet}
</ModalStack>
```

```svelte live layout="../../layouts/code/NoCode.astro"
<script>  
  import { modals} from 'svelte-modals'
  import ConfirmModal from '../../components/ConfirmModal.svelte'
  
  function openInfiniteModal() {
    let index = modals.stack.length
    let offset = `calc(${index * 150}px - 200px)`
    modals.open(ConfirmModal, {
      message: 'Open another modal? This is modal #' + (index+1),      
      onconfirm: () => openInfiniteModal(),
      style: `top: ${offset}; left: ${offset};`
    })
  }
</script>

<button onclick={openInfiniteModal}>Open</button>
```

Notice how clicking "close" on a modal in the background will close that modal 
rather than the one on the top. This is because these modal components
use the `close()` prop, which will dismiss that modal specifically.

You can also close a modal by using `modals.closeById(id)` and passing an id to the modal.

```js
modals.open(ModalComponent, props, { id: 'some-id' })
modals.closeById('some-id')
```